{% extends '_base.html' %}

{% block title %}Search{% endblock title %}

{% block content %}
<div class="class= px-5 my-5">
    <div class="row justify-content-md-center">
        <form action="{% url 'search_results_test' %}" method='get' class='d-flex'>
            <div class="mb-3 input-group">
                <input type="search" class="form-control" name='q' placeholder="{{ request.GET.q }}">
                <div class="input-group-append"><button class="btn btn-outline-success" type='submit'>Search</button>
                </div>

            </div>
        </form>
    </div>
    {% for condition in conditions %}
    <div class="list-group w-auto">
        <a href="{{ condition.get_absolute_url }}" class="list-group-item list-group-item-primary d-flex gap-3 py-3"
            aria-current="true">
            <div class="d-flex gap-2 w-100 justify-content-between">
                <div>
                    <h6 class="mb-0">{{ condition.name | capfirst }}</h6>
                    {% if condition.aliases %}
                    <p class="mb-0 opacity-75">Also known as: {{condition.aliases}}</p>
                    {% endif %}
                </div>
            </div>
            {% if condition.interactions.count > 0 %}
            <button type="button" class="btn btn-primary position-relative">
                Interactions
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                    {{ condition.interactions.count }}
                    <span class="visually-hidden">interaction count</span>
                </span>
            </button>
            {% endif %}
        </a>

    </div>
    {% endfor %}
    {% for drug in drugs %}
    <div class="list-group w-auto">
        <a href="{{ interaction.get_absolute_url }}" class="list-group-item list-group-item-secondary d-flex gap-3 py-3"
            aria-current="true">
            <div class="d-flex gap-2 w-100 justify-content-between">
                <div>
                    <h6 class="mb-0">{{ drug.name | capfirst }}</h6>
                    <p class="mb-0 opacity-75">Interactions:
                        {% for interaction in drug.interactions.all %}
                        {{ interaction.name }}
                        Conditions:
                        {% for condition in interaction.conditions.all %}
                        {{ condition.name }}
                        {% endfor %}
                        {% endfor %}
                    </p>
                </div>
                <small class="opacity-50 text-nowrap">*</small>
            </div>
        </a>

    </div>
    {% endfor %}
</div>
{% endblock content %}